<!DOCTYPE html>

<%- include ("partials/header.ejs") %> 

<!-- <div class=" container">
    <div class=" heading">Today's date </div>
  <form id="toDoForm" class="inputForm" action="/submit" method="post">
    <input type="text" id="newItem" name="trainingExcercise" placeholder="Training Excercise" autocomplete="off" required>
    <button type="submit" name ="list" value="Today's date">+</button>

    
  </form>

  <div class="itmes box">
    <% if(locals.trainingExcercise && locals.trainingList){ %>
    <% trainingList.forEach((traningExcerise) => { %>
      <div class="item"><%= traningExcerise %></div>
   <% })}; %>
  </div>
</div> -->



    <main class="main">
      <div class="trainingListH1">
        <h1>Training listğŸ’ªğŸ‹ï¸ğŸŠ</h1> <!--if Grocery button clicked res.render h1-->
          <form id="toDoForm" action="/submit" method="post">
            <input id="textInput" name="name" placeholder="Traning excerise">
            <button id="plus"type="text" name="name" value="+">+</button>
          </form>
      </div>
      <ul id="workOutList">
          <li>
            <!-- <div class="listItemContent">
              <input type="checkbox">
              <span>Grogu Curl</span>
              <button class="editBtn">Edit</button>
            </div> -->
          </li>
      </ul>
    </main>


<script src="index.js"></script>
</body>


<script>

const form = document.querySelector('#toDoForm');
const input = document.querySelector('input');
const ul = document.querySelector('#workOutList'); 

function createListItems(inputValue) {
    const li = document.createElement('li');
    const span = document.createElement('span');
    span.textContent = inputValue;

    const checkbox = document.createElement('input');
    checkbox.type = 'checkbox';

    const editBtn = document.createElement('button');
    editBtn.classList.add("liItemEditbtn");
    editBtn.textContent = 'edit';


    checkbox.addEventListener("change",(event) => {
      if(checkbox.checked){
        li.style.textDecoration = "line-through";
      }else{
        li.style.textDecoration = 'none';
      }
     

    })
    editBtn.addEventListener("click",()=>{
      const inputOnFly = document.createElement("input");
      inputOnFly.type = "text"; 
      inputOnFly.value = span.textContent;  
      //è®“input å…ƒç´ ä¸­é¡¯ç¤ºçš„æ–‡æœ¬èˆ‡åŸå§‹ span å…ƒç´ çš„æ–‡æœ¬å…§å®¹ä¸€è‡´
      inputOnFly.classList.add("editInput");

        inputOnFly.addEventListener('blur', function() {
          // ç”¨blur è®“inputå…ƒç´ è‡ªå‹•æ›´æ–°å€¼
          span.textContent = inputOnFly.value;
          // å†æ¬¡å°† span å…ƒç´ æ›¿æ¢å›è¾“å…¥æ¡†
          li.replaceChild(span, inputOnFly);
        });
        inputOnFly.addEventListener("keyup", function (event) {
          if (event.keyCode === 13) {
        // å¦‚æœæŒ‰ä¸‹ Enter éµï¼Œå‰‡è§¸ç™¼å¤±ç„¦äº‹ä»¶
          inputOnFly.blur();
          }
        });

        li.replaceChild(inputOnFly, span);
    // å°†è¾“å…¥æ¡†èšç„¦ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥ç«‹å³ç¼–è¾‘
        inputOnFly.focus();
})

    li.appendChild(checkbox);   // å°‡æ–°å‰µå»ºçš„ span å…ƒç´ æ·»åŠ ç‚ºåˆ—è¡¨é …ç›®çš„å­å…ƒç´ 
    li.appendChild(span);
    li.appendChild(editBtn);
    ul.appendChild(li);
    return li; // stop the function and shows the value of li from above, format: return li
}


form.addEventListener('submit', (event) => {
    event.preventDefault();

    const inputValue = input.value;
    if (inputValue === '') {
        alert('Please enter an exercise');
    } else {
        const li = createListItems(inputValue);
        ul.appendChild(li);
        input.value = ''; // æ¸…ç©ºè¼¸å…¥å­—æ®µ
    }
});


// // front end change up things to Gorcery Mode
// document.querySelector("#groceryBtn").addEventListener("click",(event)=>{
//   document.querySelector("h1").textContent = "Grocery List";
//   document.querySelector("input").setAttribute("placeholder", "Grocery to buy");
//   event.preventDefault();
// })





</script>


<%- include("partials/footer.ejs") %> 